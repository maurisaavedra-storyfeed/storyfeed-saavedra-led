<template name="custom_post_page">
  {{#if ready}}
    {{#if post}}
      {{#with post}}
        {{#if canView}}
          {{#if isPending}}
            <div class="grid">
              <div class="error pending-message module">
                {{_ "thanks_your_post_is_awaiting_approval"}}
              </div>
            </div>
          {{/if}}
          <h2 class="custom-title-grid">
            {{_ "discussion_page"}}
          </h2>
          <div class="single-post grid">
            <div class="posts posts-list">
              {{> post_item post=this}}
            </div>
            {{#if body}}
              {{> post_body}}
            {{/if}}
            {{> comment_submit}}
            {{> comment_list}}
          </div>
        {{else}}
          {{> no_rights}}
        {{/if}}
      {{/with}}
    {{else}}
      {{> not_found}}
    {{/if}}
  {{else}}
    <div class="posts-loading">{{> loading}}</div>
  {{/if}}
</template>